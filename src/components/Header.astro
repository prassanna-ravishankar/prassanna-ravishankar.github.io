---
// Navigation links with icons
const navItems = [
  { 
    name: 'Home', 
    url: '/',
    icon: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />`
  },
  { 
    name: 'Blog', 
    url: '/blog/',
    icon: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />`
  },
  { 
    name: 'Verses', 
    url: '/verses/',
    icon: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" />`
  },
  { 
    name: 'Podcasts', 
    url: '/podcasts/',
    icon: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />`
  },
  { 
    name: 'Projects', 
    url: '/projects/',
    icon: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />`
  },
  { 
    name: 'About', 
    url: '/about/',
    icon: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />`
  },
];

// Get current path for highlighting active link
const currentPath = Astro.url.pathname;
---

<header class="modern-header">
  <div class="header-container">
    <nav class="header-nav">
      <a href="/" class="brand-link">
        <span class="brand-text">Prassanna</span>
        <span class="brand-subtitle">Algorithmic Vibesmith</span>
      </a>
      
      <!-- Mobile menu button -->
      <button id="menu-toggle" class="mobile-menu-btn" aria-label="Toggle navigation menu">
        <div class="hamburger">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </div>
      </button>
      
      <!-- Desktop navigation -->
      <div class="desktop-nav">
        {navItems.map(item => {
          const isActive = currentPath === item.url || 
            (item.url !== '/' && currentPath.startsWith(item.url));
          
          return (
            <a 
              href={item.url} 
              class={`nav-link ${isActive ? 'active' : ''}`}
              aria-current={isActive ? 'page' : undefined}
            >
              <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <Fragment set:html={item.icon} />
              </svg>
              <span class="nav-text">{item.name}</span>
            </a>
          );
        })}
      </div>
    </nav>
    
    <!-- Mobile navigation -->
    <div id="mobile-menu" class="mobile-nav hidden">
      <div class="mobile-nav-content">
        {navItems.map(item => {
          const isActive = currentPath === item.url || 
            (item.url !== '/' && currentPath.startsWith(item.url));
          
          return (
            <a 
              href={item.url} 
              class={`mobile-nav-link ${isActive ? 'active' : ''}`}
              aria-current={isActive ? 'page' : undefined}
            >
              <svg class="mobile-nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <Fragment set:html={item.icon} />
              </svg>
              <span class="mobile-nav-text">{item.name}</span>
            </a>
          );
        })}
      </div>
    </div>
  </div>
</header>

<script>
  // Enhanced mobile menu toggle with animations
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  const hamburger = menuToggle?.querySelector('.hamburger');
  
  if (menuToggle && mobileMenu && hamburger) {
    let isOpen = false;
    
    menuToggle.addEventListener('click', () => {
      isOpen = !isOpen;
      
      // Toggle hamburger animation
      hamburger.classList.toggle('open', isOpen);
      
      // Toggle mobile menu
      if (isOpen) {
        mobileMenu.classList.remove('hidden');
        // Trigger animation
        requestAnimationFrame(() => {
          mobileMenu.classList.add('open');
        });
      } else {
        mobileMenu.classList.remove('open');
        // Wait for animation to complete before hiding
        setTimeout(() => {
          mobileMenu.classList.add('hidden');
        }, 300);
      }
    });
    
    // Close menu when clicking on links
    const mobileLinks = mobileMenu.querySelectorAll('.mobile-nav-link');
    mobileLinks.forEach(link => {
      link.addEventListener('click', () => {
        isOpen = false;
        hamburger.classList.remove('open');
        mobileMenu.classList.remove('open');
        setTimeout(() => {
          mobileMenu.classList.add('hidden');
        }, 300);
      });
    });
    
    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
      if (isOpen && !menuToggle.contains(e.target) && !mobileMenu.contains(e.target)) {
        isOpen = false;
        hamburger.classList.remove('open');
        mobileMenu.classList.remove('open');
        setTimeout(() => {
          mobileMenu.classList.add('hidden');
        }, 300);
      }
    });
  }
</script>

<style>
  .modern-header {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(8px);
    border-bottom: 1px solid var(--color-border-primary);
    position: sticky;
    top: 0;
    z-index: 1000;
    transition: all var(--duration-300) var(--ease-out);
  }

  .dark .modern-header {
    background: rgba(17, 24, 39, 0.95);
  }

  .header-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: var(--space-4) var(--space-8);
  }

  .header-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  /* Brand */
  .brand-link {
    display: flex;
    flex-direction: column;
    text-decoration: none;
    color: var(--color-text-primary);
    transition: transform var(--duration-200) var(--ease-out);
  }

  .brand-link:hover {
    transform: scale(1.02);
  }

  .brand-text {
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    font-family: var(--font-family-display);
    line-height: var(--leading-tight);
  }

  .brand-subtitle {
    font-size: var(--text-xs);
    color: var(--color-text-secondary);
    font-weight: var(--font-medium);
    margin-top: -2px;
  }

  /* Desktop Navigation */
  .desktop-nav {
    display: none;
    align-items: center;
    gap: var(--space-6);
  }

  @media (min-width: 768px) {
    .desktop-nav {
      display: flex;
    }
  }

  .nav-link {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-3) var(--space-4);
    border-radius: var(--radius-lg);
    text-decoration: none;
    color: var(--color-text-secondary);
    font-weight: var(--font-medium);
    font-size: var(--text-sm);
    transition: all var(--duration-200) var(--ease-out);
    position: relative;
  }

  .nav-link:hover {
    color: var(--color-primary-600);
    background: var(--color-primary-50);
    transform: translateY(-1px);
  }

  .dark .nav-link:hover {
    background: var(--color-primary-950);
  }

  .nav-link.active {
    color: var(--color-primary-700);
    background: var(--color-primary-100);
    font-weight: var(--font-semibold);
  }

  .dark .nav-link.active {
    color: var(--color-primary-300);
    background: var(--color-primary-900);
  }

  .nav-icon {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }

  .nav-text {
    white-space: nowrap;
  }

  /* Mobile Menu Button */
  .mobile-menu-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    border: none;
    background: none;
    cursor: pointer;
    border-radius: var(--radius-lg);
    transition: background-color var(--duration-200) var(--ease-out);
  }

  .mobile-menu-btn:hover {
    background: var(--color-bg-secondary);
  }

  @media (min-width: 768px) {
    .mobile-menu-btn {
      display: none;
    }
  }

  /* Hamburger Animation */
  .hamburger {
    width: 20px;
    height: 16px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .hamburger-line {
    width: 100%;
    height: 2px;
    background: var(--color-text-primary);
    border-radius: 1px;
    transition: all var(--duration-300) var(--ease-out);
    transform-origin: center;
  }

  .hamburger.open .hamburger-line:nth-child(1) {
    transform: translateY(7px) rotate(45deg);
  }

  .hamburger.open .hamburger-line:nth-child(2) {
    opacity: 0;
    transform: scaleX(0);
  }

  .hamburger.open .hamburger-line:nth-child(3) {
    transform: translateY(-7px) rotate(-45deg);
  }

  /* Mobile Navigation */
  .mobile-nav {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: var(--color-bg-primary);
    border-bottom: 1px solid var(--color-border-primary);
    box-shadow: var(--shadow-lg);
    opacity: 0;
    transform: translateY(-10px);
    transition: all var(--duration-300) var(--ease-out);
  }

  .mobile-nav.open {
    opacity: 1;
    transform: translateY(0);
  }

  .mobile-nav-content {
    padding: var(--space-6);
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }

  .mobile-nav-link {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    border-radius: var(--radius-xl);
    text-decoration: none;
    color: var(--color-text-secondary);
    font-weight: var(--font-medium);
    font-size: var(--text-base);
    transition: all var(--duration-200) var(--ease-out);
    min-height: 44px; /* Touch target */
  }

  .mobile-nav-link:hover {
    color: var(--color-primary-600);
    background: var(--color-primary-50);
    transform: translateX(4px);
  }

  .dark .mobile-nav-link:hover {
    background: var(--color-primary-950);
  }

  .mobile-nav-link.active {
    color: var(--color-primary-700);
    background: var(--color-primary-100);
    font-weight: var(--font-semibold);
  }

  .dark .mobile-nav-link.active {
    color: var(--color-primary-300);
    background: var(--color-primary-900);
  }

  .mobile-nav-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
  }

  .mobile-nav-text {
    flex: 1;
  }

  /* Scrolled state */
  @media (min-width: 768px) {
    .modern-header.scrolled {
      background: rgba(255, 255, 255, 0.98);
      box-shadow: var(--shadow-base);
    }

    .dark .modern-header.scrolled {
      background: rgba(17, 24, 39, 0.98);
    }
  }

  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    .nav-link,
    .mobile-nav-link,
    .mobile-nav,
    .hamburger-line,
    .brand-link {
      transition: none;
    }

    .nav-link:hover,
    .mobile-nav-link:hover {
      transform: none;
    }
  }
</style> 